# ğŸš€ ArcadeZone å‰åç«¯åˆ†ç¦»å®æ–½æ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æ¦‚å†µ

**å½“å‰çŠ¶æ€**: çº¯é™æ€å‰ç«¯  
**ç›®æ ‡çŠ¶æ€**: å‰ç«¯ + Supabase åç«¯  
**é¢„è®¡æ—¶é—´**: 2-3å¤©å®ŒæˆåŸºç¡€åŠŸèƒ½

---

## ğŸ¯ å®æ–½æ­¥éª¤ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰

### æ­¥éª¤ 1: åˆ›å»º Supabase é¡¹ç›® ğŸ”‘

#### 1.1 æ³¨å†Œå¹¶åˆ›å»ºé¡¹ç›®

1. è®¿é—® https://supabase.com
2. ç‚¹å‡» "Start your project" 
3. ä½¿ç”¨ GitHub è´¦å·ç™»å½•ï¼ˆæ¨èï¼‰
4. ç‚¹å‡» "New Project"
5. å¡«å†™ä¿¡æ¯ï¼š
   - **é¡¹ç›®åç§°**: `arcadezone` æˆ– `arcade-zone-db`
   - **æ•°æ®åº“å¯†ç **: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆè®°ä¸‹æ¥ï¼ï¼‰
   - **åœ°åŒº**: é€‰æ‹© `Northeast Asia (Tokyo)` ï¼ˆç¦»ä¸­å›½æœ€è¿‘ï¼‰
   - **å®šä»·**: Freeï¼ˆå…è´¹ç‰ˆè¶³å¤Ÿï¼‰
6. ç‚¹å‡» "Create new project"
7. ç­‰å¾… 2-3 åˆ†é’Ÿé¡¹ç›®åˆ›å»ºå®Œæˆ

#### 1.2 è·å– API å¯†é’¥

é¡¹ç›®åˆ›å»ºå®Œæˆåï¼š

1. è¿›å…¥é¡¹ç›® Dashboard
2. ç‚¹å‡»å·¦ä¾§èœå• **Settings** â†’ **API**
3. æ‰¾åˆ°ä»¥ä¸‹ä¸¤ä¸ªå€¼ï¼š
   - **Project URL**: ç±»ä¼¼ `https://xxxxx.supabase.co`
   - **anon public key**: ä¸€ä¸²å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼ˆä»¥ `eyJ` å¼€å¤´ï¼‰
4. å¤åˆ¶è¿™ä¸¤ä¸ªå€¼ï¼Œç¨åä¼šç”¨åˆ°

---

### æ­¥éª¤ 2: é…ç½®æ•°æ®åº“ ğŸ’¾

#### 2.1 å¯ç”¨é‚®ç®±è®¤è¯

1. åœ¨ Supabase Dashboardï¼Œç‚¹å‡» **Authentication** â†’ **Providers**
2. æ‰¾åˆ° **Email**ï¼Œç¡®ä¿å·²å¯ç”¨
3. é…ç½®é€‰é¡¹ï¼š
   - **Enable Email provider**: âœ… å¼€å¯
   - **Confirm email**: âœ… å¼€å¯ï¼ˆå¯é€‰ï¼Œæ¨èå…³é—­æ–¹ä¾¿æµ‹è¯•ï¼‰
   - **Secure email change**: âœ… å¼€å¯

#### 2.2 åˆ›å»ºæ•°æ®åº“è¡¨

1. ç‚¹å‡»å·¦ä¾§ **SQL Editor**
2. ç‚¹å‡» **New query**
3. å¤åˆ¶ `database-schema.sql` æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
4. ç²˜è´´åˆ°ç¼–è¾‘å™¨
5. ç‚¹å‡» **Run** æ‰§è¡Œ
6. çœ‹åˆ° "Success. No rows returned" è¡¨ç¤ºæˆåŠŸ

#### 2.3 éªŒè¯è¡¨åˆ›å»º

1. ç‚¹å‡»å·¦ä¾§ **Table Editor**
2. åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªè¡¨ï¼š
   - `profiles` - ç”¨æˆ·èµ„æ–™è¡¨
   - `game_records` - æ¸¸æˆè®°å½•è¡¨
3. ç‚¹å‡»æ¯ä¸ªè¡¨æŸ¥çœ‹ç»“æ„

---

### æ­¥éª¤ 3: é…ç½®å‰ç«¯å¯†é’¥ ğŸ”

#### 3.1 æ›´æ–° supabase-config.js

æ‰“å¼€æ–‡ä»¶å¹¶æ›¿æ¢ï¼š

```javascript
const SUPABASE_CONFIG = {
    url: 'https://ä½ çš„é¡¹ç›®ID.supabase.co',  // ä»æ­¥éª¤1.2è·å–
    anonKey: 'eyJå¼€å¤´çš„é•¿å­—ç¬¦ä¸²'  // ä»æ­¥éª¤1.2è·å–
};
```

#### 3.2 æµ‹è¯•è¿æ¥

åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š
```javascript
console.log(window.supabase); // åº”è¯¥çœ‹åˆ° Supabase å®¢æˆ·ç«¯å¯¹è±¡
```

---

### æ­¥éª¤ 4: æ›´æ–°è®¤è¯ç³»ç»Ÿ ğŸ”’

æ–°çš„è®¤è¯ç³»ç»Ÿæ–‡ä»¶å·²å‡†å¤‡å¥½ï¼š`auth-supabase.js`

**åŠŸèƒ½ç‰¹æ€§**ï¼š
- âœ… ä½¿ç”¨ Supabase è®¤è¯ï¼ˆå®‰å…¨ï¼‰
- âœ… JWT Token ç®¡ç†
- âœ… å¯†ç åŠ å¯†å­˜å‚¨
- âœ… è‡ªåŠ¨ session ç®¡ç†
- âœ… é‚®ç®±éªŒè¯ï¼ˆå¯é€‰ï¼‰

---

### æ­¥éª¤ 5: é›†æˆåˆ°é¡µé¢ ğŸŒ

#### 5.1 æ›´æ–° index.html

æ‰¾åˆ°è¢«æ³¨é‡Šçš„éƒ¨åˆ†ï¼Œå–æ¶ˆæ³¨é‡Šï¼š

```html
<!-- å–æ¶ˆæ³¨é‡Šè¿™äº›è¡Œ -->
<div id="auth-nav-container">
    <!-- è®¤è¯æŒ‰é’®ä¼šåŠ¨æ€æ’å…¥è¿™é‡Œ -->
</div>

<!-- é¡µé¢åº•éƒ¨ï¼Œå–æ¶ˆæ³¨é‡Š -->
<script src="supabase-config.js"></script>
<script src="supabase-client.js"></script>
<script src="auth-supabase.js"></script>
```

#### 5.2 åŒæ ·æ›´æ–°å…¶ä»–é¡µé¢

éœ€è¦åœ¨ä»¥ä¸‹é¡µé¢åšåŒæ ·æ“ä½œï¼š
- `games.html`
- `contact.html`
- `purchase.html`
- `chessmaster.html`
- `snakegame.html`
- `tetrisgame.html`
- `breakoutgame.html`

---

### æ­¥éª¤ 6: åˆ›å»ºç”¨æˆ·ä¸­å¿ƒé¡µé¢ ğŸ‘¤

**æ–°é¡µé¢**: `profile.html`

åŠŸèƒ½åŒ…æ‹¬ï¼š
- æŸ¥çœ‹ä¸ªäººèµ„æ–™
- ä¿®æ”¹ç”¨æˆ·åã€å¤´åƒ
- æŸ¥çœ‹æ¸¸æˆå†å²è®°å½•
- æŸ¥çœ‹æ’è¡Œæ¦œæ’å
- è´¦æˆ·è®¾ç½®

---

### æ­¥éª¤ 7: æ¸¸æˆæ•°æ®ä¿å­˜ ğŸ’¾

åœ¨æ¯ä¸ªæ¸¸æˆä¸­æ·»åŠ åˆ†æ•°ä¿å­˜åŠŸèƒ½ï¼š

```javascript
// æ¸¸æˆç»“æŸæ—¶ä¿å­˜åˆ†æ•°
async function saveGameScore(gameType, score, duration) {
    if (!window.supabase || !window.currentUser) {
        console.log('ç”¨æˆ·æœªç™»å½•ï¼Œåˆ†æ•°ä¸ä¿å­˜');
        return;
    }
    
    const { data, error } = await window.supabase
        .from('game_records')
        .insert([{
            user_id: window.currentUser.id,
            game_type: gameType,
            score: score,
            duration: duration,
            result: 'completed'
        }]);
    
    if (error) {
        console.error('ä¿å­˜å¤±è´¥:', error);
    } else {
        console.log('åˆ†æ•°å·²ä¿å­˜ï¼');
    }
}
```

---

## ğŸ”’ å®‰å…¨æ£€æŸ¥æ¸…å•

å®æ–½å‰åç«¯åˆ†ç¦»åï¼Œç¡®ä¿ï¼š

- [x] âœ… å¯†ç ä¸å†å­˜å‚¨åœ¨å‰ç«¯
- [x] âœ… ä½¿ç”¨ HTTPSï¼ˆVercel è‡ªåŠ¨æä¾›ï¼‰
- [x] âœ… API å¯†é’¥æ­£ç¡®é…ç½®
- [x] âœ… Row Level Security (RLS) å·²å¯ç”¨
- [x] âœ… ç”¨æˆ·åªèƒ½ä¿®æ”¹è‡ªå·±çš„æ•°æ®
- [ ] âš ï¸ é…ç½®é‚®ç®±éªŒè¯ï¼ˆå¯é€‰ï¼‰
- [ ] âš ï¸ æ·»åŠ é€Ÿç‡é™åˆ¶ï¼ˆé˜²æ­¢æ»¥ç”¨ï¼‰

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | æ—§ç³»ç»Ÿï¼ˆlocalStorageï¼‰ | æ–°ç³»ç»Ÿï¼ˆSupabaseï¼‰ |
|------|----------------------|-------------------|
| å¯†ç å­˜å‚¨ | âŒ æ˜æ–‡ï¼ˆå±é™©ï¼‰ | âœ… åŠ å¯† |
| æ•°æ®æŒä¹…æ€§ | âŒ æœ¬åœ°ï¼ˆå¯æ¸…é™¤ï¼‰ | âœ… äº‘ç«¯ |
| è·¨è®¾å¤‡åŒæ­¥ | âŒ ä¸æ”¯æŒ | âœ… è‡ªåŠ¨åŒæ­¥ |
| æ’è¡Œæ¦œ | âŒ æ— æ³•å®ç° | âœ… å®æ—¶æ’å |
| å®‰å…¨æ€§ | âŒ ä½ | âœ… é«˜ |
| æˆæœ¬ | âœ… å…è´¹ | âœ… å…è´¹ï¼ˆæœ‰é™é¢ï¼‰ |

---

## ğŸ® æ–°å¢åŠŸèƒ½

### 1. å…¨å±€æ’è¡Œæ¦œ
```javascript
// è·å–è´ªé£Ÿè›‡æ’è¡Œæ¦œå‰10å
const { data } = await supabase
    .from('game_records')
    .select('score, profiles(username)')
    .eq('game_type', 'snake')
    .order('score', { ascending: false })
    .limit(10);
```

### 2. ä¸ªäººç»Ÿè®¡
```javascript
// è·å–ç”¨æˆ·æ‰€æœ‰æ¸¸æˆç»Ÿè®¡
const { data } = await supabase
    .from('game_records')
    .select('*')
    .eq('user_id', currentUser.id);
```

### 3. æˆå°±ç³»ç»Ÿï¼ˆæœªæ¥ï¼‰
- é¦–æ¬¡ç™»å½•å¥–åŠ±
- è¿ç»­ç™»å½•å¥–åŠ±
- é«˜åˆ†æˆå°±
- æ¸¸æˆæ¬¡æ•°é‡Œç¨‹ç¢‘

---

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: Supabase å…è´¹ç‰ˆå¤Ÿç”¨å—ï¼Ÿ
**A**: å¤Ÿç”¨ï¼å…è´¹ç‰ˆæä¾›ï¼š
- 500MB æ•°æ®åº“ç©ºé—´
- æ¯æœˆ 50,000 æ¬¡ API è¯·æ±‚
- æ— é™åˆ¶çš„è®¤è¯ç”¨æˆ·
- 1GB æ–‡ä»¶å­˜å‚¨

å¯¹äºå°å‹æ¸¸æˆç½‘ç«™å®Œå…¨è¶³å¤Ÿã€‚

### Q2: æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ
**A**: ä¸ä¼šã€‚Supabase ä½¿ç”¨ PostgreSQL æ•°æ®åº“ï¼Œæ•°æ®æ°¸ä¹…ä¿å­˜ã€‚

### Q3: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ
**A**: åœ¨ Dashboard â†’ Database â†’ Backups å¯ä»¥æ‰‹åŠ¨å¤‡ä»½ã€‚

### Q4: é€Ÿåº¦ä¼šæ…¢å—ï¼Ÿ
**A**: é€‰æ‹© Tokyo æœåŠ¡å™¨ï¼Œä¸­å›½å¤§é™†è®¿é—®é€Ÿåº¦çº¦ 100-300msï¼Œå¯æ¥å—ã€‚

### Q5: å¯ä»¥æ¢åç«¯å—ï¼Ÿ
**A**: å¯ä»¥ï¼Supabase æä¾›æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼Œéšæ—¶å¯ä»¥è¿ç§»ã€‚

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å¯ç”¨ç¼“å­˜
```javascript
// ç¼“å­˜ç”¨æˆ·èµ„æ–™ï¼ˆ5åˆ†é’Ÿï¼‰
const cachedProfile = localStorage.getItem('profile_cache');
if (cachedProfile && Date.now() - cachedProfile.time < 300000) {
    return cachedProfile.data;
}
```

### 2. æ‰¹é‡æŸ¥è¯¢
```javascript
// ä¸€æ¬¡æ€§è·å–å¤šä¸ªæ¸¸æˆçš„åˆ†æ•°
const { data } = await supabase
    .from('game_records')
    .select('*')
    .in('game_type', ['snake', 'tetris', 'breakout']);
```

### 3. ä½¿ç”¨ Realtimeï¼ˆå¯é€‰ï¼‰
```javascript
// å®æ—¶æ›´æ–°æ’è¡Œæ¦œ
supabase
    .from('game_records')
    .on('INSERT', payload => {
        console.log('æ–°è®°å½•ï¼', payload);
        updateLeaderboard();
    })
    .subscribe();
```

---

## ğŸ¯ å®æ–½ä¼˜å…ˆçº§

### ç¬¬ä¸€é˜¶æ®µï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰âœ…
1. åˆ›å»º Supabase é¡¹ç›®
2. é…ç½®æ•°æ®åº“
3. å®ç°æ³¨å†Œ/ç™»å½•
4. ä¿å­˜æ¸¸æˆåˆ†æ•°

### ç¬¬äºŒé˜¶æ®µï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰â³
1. ç”¨æˆ·ä¸ªäººä¸­å¿ƒ
2. æ’è¡Œæ¦œç³»ç»Ÿ
3. æ¸¸æˆå†å²è®°å½•
4. å¤´åƒä¸Šä¼ 

### ç¬¬ä¸‰é˜¶æ®µï¼ˆé«˜çº§åŠŸèƒ½ï¼‰ğŸ”®
1. ç¤¾äº¤åŠŸèƒ½ï¼ˆå¥½å‹ã€è¯„è®ºï¼‰
2. æˆå°±ç³»ç»Ÿ
3. æ¯æ—¥ä»»åŠ¡
4. è™šæ‹Ÿè´§å¸/ç§¯åˆ†

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³å¼€å§‹**ï¼š

1. [ ] åˆ›å»º Supabase è´¦å·
2. [ ] å¤åˆ¶ API å¯†é’¥åˆ° `supabase-config.js`
3. [ ] è¿è¡Œæ•°æ®åº“è„šæœ¬
4. [ ] åœ¨æµè§ˆå™¨æµ‹è¯•æ³¨å†ŒåŠŸèƒ½
5. [ ] æäº¤ä»£ç åˆ° Git
6. [ ] éƒ¨ç½²åˆ° Vercel

**é¢„è®¡æ—¶é—´**: 1-2 å°æ—¶å®ŒæˆåŸºç¡€é…ç½®

---

## ğŸ’¡ å°æŠ€å·§

### å¼€å‘æ¨¡å¼
åœ¨ Supabase Dashboard â†’ Settings â†’ APIï¼Œå¯ä»¥æ‰¾åˆ°ï¼š
- **service_role key**: ç»•è¿‡ RLSï¼Œä»…ç”¨äºæœåŠ¡ç«¯
- **anon key**: å‰ç«¯ä½¿ç”¨ï¼Œå— RLS é™åˆ¶

### è°ƒè¯•æŠ€å·§
```javascript
// å¯ç”¨è¯¦ç»†æ—¥å¿—
window.supabase.auth.onAuthStateChange((event, session) => {
    console.log('Auth event:', event, session);
});
```

### é‡ç½®å¯†ç 
Supabase è‡ªå¸¦å¯†ç é‡ç½®åŠŸèƒ½ï¼š
```javascript
await supabase.auth.resetPasswordForEmail('user@example.com');
```

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹ï¼** ğŸš€

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘ï¼

