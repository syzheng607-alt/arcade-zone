<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¤è¯ç³»ç»Ÿæµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-900 text-white p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">ğŸ” è®¤è¯ç³»ç»Ÿè¯Šæ–­</h1>
        
        <div class="space-y-4">
            <div class="bg-gray-800 p-4 rounded">
                <h2 class="text-xl font-bold mb-2">1. æµ‹è¯•å®¹å™¨</h2>
                <div id="auth-nav-container" class="hidden md:block bg-gray-700 p-4 rounded">
                    <!-- Auth buttons will be inserted here -->
                </div>
            </div>
            
            <div class="bg-gray-800 p-4 rounded">
                <h2 class="text-xl font-bold mb-2">2. åŠ è½½çŠ¶æ€</h2>
                <pre id="log" class="bg-gray-900 p-4 rounded text-sm overflow-auto max-h-96"></pre>
            </div>
            
            <div class="bg-gray-800 p-4 rounded">
                <h2 class="text-xl font-bold mb-2">3. æ£€æŸ¥ç»“æœ</h2>
                <ul id="checks" class="space-y-2"></ul>
            </div>
        </div>
    </div>
    
    <script src="supabase-config.js"></script>
    <script src="supabase-client.js"></script>
    <script src="auth-supabase.js"></script>
    
    <script>
        const log = document.getElementById('log');
        const checks = document.getElementById('checks');
        
        function addLog(message) {
            log.textContent += message + '\n';
            console.log(message);
        }
        
        function addCheck(message, status) {
            const li = document.createElement('li');
            li.className = 'flex items-center space-x-2';
            li.innerHTML = `
                <span class="${status ? 'text-green-500' : 'text-red-500'} text-xl">
                    ${status ? 'âœ…' : 'âŒ'}
                </span>
                <span>${message}</span>
            `;
            checks.appendChild(li);
        }
        
        // åŠ«æŒ console.log æ¥æ˜¾ç¤ºæ‰€æœ‰æ—¥å¿—
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            addLog(args.join(' '));
        };
        
        // ç­‰å¾…ä¸€åˆ‡åŠ è½½å®Œæˆåæ£€æŸ¥
        setTimeout(() => {
            addLog('\n=== å¼€å§‹è¯Šæ–­ ===\n');
            
            // æ£€æŸ¥ 1: Supabase SDK
            addCheck('Supabase SDK å·²åŠ è½½', typeof supabase !== 'undefined');
            
            // æ£€æŸ¥ 2: é…ç½®æ–‡ä»¶
            addCheck('supabase-config.js å·²åŠ è½½', typeof SUPABASE_CONFIG !== 'undefined');
            
            // æ£€æŸ¥ 3: å®¢æˆ·ç«¯
            addCheck('supabase-client.js å·²åŠ è½½', typeof window.supabase !== 'undefined');
            
            // æ£€æŸ¥ 4: è®¤è¯ç³»ç»Ÿ
            addCheck('auth-supabase.js å·²åŠ è½½', typeof window.AuthSystem !== 'undefined');
            
            // æ£€æŸ¥ 5: å®¹å™¨
            const container = document.getElementById('auth-nav-container');
            addCheck('auth-nav-container å­˜åœ¨', container !== null);
            
            // æ£€æŸ¥ 6: å®¹å™¨å†…å®¹
            const hasContent = container && container.innerHTML.trim().length > 50;
            addCheck('auth-nav-container æœ‰å†…å®¹', hasContent);
            
            // æ£€æŸ¥ 7: å®¹å™¨å¯è§æ€§
            const isVisible = container && !container.classList.contains('hidden');
            addCheck('auth-nav-container å¯è§', isVisible);
            
            // æ£€æŸ¥ 8: Supabase é…ç½®
            if (typeof SUPABASE_CONFIG !== 'undefined') {
                const hasValidConfig = SUPABASE_CONFIG.url && 
                                      SUPABASE_CONFIG.url !== 'YOUR_SUPABASE_URL_HERE' &&
                                      SUPABASE_CONFIG.anonKey && 
                                      SUPABASE_CONFIG.anonKey !== 'YOUR_SUPABASE_ANON_KEY_HERE';
                addCheck('Supabase é…ç½®æœ‰æ•ˆ', hasValidConfig);
                
                if (!hasValidConfig) {
                    addLog('\nâš ï¸ è­¦å‘Šï¼šSupabase é…ç½®æ— æ•ˆï¼');
                    addLog('URL: ' + SUPABASE_CONFIG.url);
                    addLog('Key: ' + (SUPABASE_CONFIG.anonKey ? SUPABASE_CONFIG.anonKey.substring(0, 20) + '...' : 'undefined'));
                }
            }
            
            addLog('\n=== è¯Šæ–­å®Œæˆ ===');
        }, 2000);
    </script>
</body>
</html>

